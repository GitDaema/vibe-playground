# Vibe Playground - CNL(제약 자연어) 가이드

최종 업데이트: 2025-10-25

이 문서는 Vibe Playground에서 사용되는 한국어 제약 자연어(CNL)의 구문과 허용 범위를 설명합니다. CNL은 사용자가 자연스러운 문장으로 그래프 퍼즐을 만들고 풀이 규칙을 설계할 수 있도록 돕습니다.

---

## 1. 퍼즐 제작 (Authoring CNL)

`퍼즐 만들기` 탭에서 그래프의 구조를 정의할 때 사용되는 구문입니다.

### 노드 생성
- **기본 구문**: `노드 A, B, C 생성`, `점 A, B, C를 만든다`
- **허용 표현**:
  - `노드 A, B, C를 만든다.`
  - `A, B, C 노드 추가`
  - `점 A, B 생성`

### 간선 연결
- **기본 구문**: `A에서 B로 연결`, `A B 연결`
- **허용 표현**:
  - `A에서 B로 간선을 잇는다`
  - `A와 B를 연결해`
  - `A B 이어줘`
  - `A, B, C를 순서대로 연결` (A-B, B-C 간선 생성)

### 아이템 배치
- **기본 구문**: `B에 열쇠가 있다`
- **허용 표현**:
  - `노드 B에 '열쇠'가 있다.`
  - `B에 '키' 배치`

### 간선 잠금 (아이템 요구)
- **기본 구문**: `B→C는 '열쇠'가 필요하다`
- **허용 표현**:
  - `B에서 C로 가려면 '열쇠'가 필요하다.`
  - `B와 C를 잇는 간선을 지나려면 열쇠가 필요하다.`
  - `B-C는 '키'가 있어야 한다.`

### 시작/목표 노드 설정
- **기본 구문**: `시작은 A, 목표는 D`
- **허용 표현**:
  - `시작은 A`
  - `목표는 D`
  - `출발점은 A이고, 도착점은 D이다.`

---

## 2. 퍼즐 풀이 규칙 (Rule CNL)

`퍼즐 풀기` 탭에서 그래프 탐색 알고리즘을 정의할 때 사용되는 구문입니다. 규칙은 **조건(When)**과 **행동(Then)**으로 구성되며, 쉼표(`,`)로 여러 조건을 나열하거나 행동을 연결할 수 있습니다.

### 조건 (When Clauses)

| 조건 유형 | 대표 구문 | 허용 표현 예시 |
| --- | --- | --- |
| **현재 위치** | `A에 도착하면` | `현재 노드가 'A'라면`, `A에 있을 때` |
| **미방문 확인 (현재)** | `아직 방문하지 않았다면` | `이 노드를 방문한 적이 없다면` |
| **미방문 확인 (특정)** | `X를 아직 방문하지 않았다면` | `노드 X가 미방문 상태라면` |
| **아이템 소지** | `열쇠를 가지고 있고...` | `인벤토리에 '열쇠'가 있으면` |
| **큐 상태** | `큐가 비어있지 않다면` | `큐에 원소가 남아있으면` |
| **스택 상태** | `스택이 빌 때까지` | `스택이 비어있지 않다면` |

### 행동 (Then Clauses)

| 행동 유형 | 대표 구문 | 허용 표현 예시 |
| --- | --- | --- |
| **이동** | `B로 이동한다` | `이동: B` |
| **아이템 사용/버리기**| `열쇠를 사용한다` | `열쇠를 버린다` |
| **방문 표시 (현재)** | `방문 표시를 한다` | `현재 노드를 방문 처리한다` |
| **방문 표시 (특정)** | `X를 방문 표시한다` | `노드 X를 방문한 것으로 표시` |
| **큐에 추가** | `큐에 X를 추가한다` | `X를 큐에 넣어` |
| **큐에서 꺼내기** | `큐에서 다음 노드를 꺼낸다` | `큐에서 하나를 pop한다` |
| **스택에 추가** | `스택에 X를 넣는다` | `X를 스택에 추가한다` |
| **스택에서 꺼내기** | `스택에서 다음 노드를 뺀다` | `스택에서 pop` |
| **이웃 노드 큐 추가** | `이웃을 큐에 추가한다` | `인접 노드를 큐에 넣는다` |
| **이웃 노드 스택 추가**| `이웃을 스택에 추가한다` | `인접 노드를 스택에 넣는다` |

### 자동 줍기 (Implicit Pickup)

- 이동에 의해 어떤 노드에 “도착”하면(예: `B로 이동한다`, `큐에서 다음 노드를 꺼낸다`, `스택에서 다음 노드를 뺀다`), 그 노드에 있는 모든 아이템(`item:<이름>` 태그)은 자동으로 인벤토리에 들어갑니다.
- 따라서 `...에 열쇠가 있다`로 아이템이 배치된 경우, 별도의 `열쇠를 줍는다` 규칙을 작성하지 않아도 됩니다.
- 이미 가진 아이템은 중복 저장되지 않으며, 줍고 나면 해당 노드의 아이템 태그는 제거됩니다.

### 복합 규칙 예시

- **BFS 기본 규칙**: `아직 방문하지 않았다면, 방문 표시를 한다, 이웃을 큐에 추가한다`
- **조건부 이동**: `열쇠를 가지고 있고 B에 도착하면, C로 이동한다`
- **연속된 조건**: `큐가 비어있지 않다면, 큐에서 다음 노드를 꺼낸다` (꺼낸 노드에서 다음 규칙이 적용됨)
